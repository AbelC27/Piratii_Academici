{% extends 'app/base.html' %}
{% block title %}Solved History - PBMate{% endblock %}
{% block content %}
<style>
  /* Make the page container wider on this page only */
  .page-wrapper > .container {
    max-width: 1100px !important;
  }
  /* Custom outer wrapper to avoid nested .container sizing */
  .history-container {
    background: white;
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    max-width: 1100px;
    margin: 0 auto;
  }
  .history-header { padding-bottom: 1rem; text-align: center; }
  .history-table-wrapper { overflow: auto; border-radius: 8px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); margin: 0 auto; }
  .history-table { width: 100%; border-collapse: collapse; background: white; }
  .history-table th, .history-table td { padding: 0.75rem 1rem; }
  .history-table thead tr { background: #f3f4f6; text-align: left; }
  .history-table tbody tr { border-bottom: 1px solid #f1f5f9; }
  .history-when { color: #475569; white-space: nowrap; }
  .history-user { font-weight: 600; }
  /* Helpful column sizing */
  .history-table thead th:nth-child(1) { width: 170px; }
  .history-table thead th:nth-child(2) { width: 220px; }
  .history-table td:nth-child(3) { word-break: break-word; }
</style>

<div class="history-container">
  <div class="history-header">
    <h1>ðŸ“œ Solved Problems History</h1>
    <p>Latest solves by users. Answers are hidden.</p>
  </div>

  {% if not entries %}
    <div class="card"><div class="card-body">No solved problems yet.</div></div>
  {% else %}
  <div class="history-table-wrapper">
    <table class="history-table">
      <thead>
        <tr>
          <th>When</th>
          <th>User</th>
          <th>Problem</th>
        </tr>
      </thead>
      <tbody>
        {% for e in entries %}
        <tr>
          <td class="history-when">{{ e.latest_solved_at|date:"Y-m-d H:i" }}</td>
          <td class="history-user">{{ e.user__username }}</td>
          <td>#{{ e.problem__id }} â€” {{ e.problem__question }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
</div>
{% endblock %}
